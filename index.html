<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

                <title>Software Development for Engineering Research - Classes and Objects</title>

                <meta name="description" content="
                Lecture on classes and objects for ME 599: Software Development for Engineering Research
                ">
		<meta name="author" content="Kyle Niemeyer">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/simple.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
                <section>
                    <h2>Classes and Objects</h2>
                    <h3>Software Development for Engineering Research</h3>
                    <br/>
                    <h3>Kyle Niemeyer. 7 May 2018</h3>
                    <h3>ME 599, Corvallis, OR</h3>
                </section>
                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Today: Using classes and objects for research code
                        </textarea>
                    </section>

                    <section>
                        <p class="fragment"><strong>Classes:</strong>
                            organize data, methods, and functions
                        </p>

                        <p class="fragment"><strong>Objects:</strong>
                            manifestations of classes
                        </p>

                        <p class="fragment">
                            We can use object-oriented programming to cleanly organize
                            behaviors and data in our code.
                        </p>
                    </section>

                    <section>
                        <h3>Object Orientation</h3>
                        <br/>

                        <p class="fragment">
                            It provides a framework for classifying distinct concepts into comprehensible sizes.
                            These smaller conceptual units facilitate cleaner, more scalable modeling.
                        </p>
                    </section>
                    <section>
                        <h3>Object Orientation</h3>
                        <br/>

                        <ul>
                            <li class="fragment">Classes and objects combine functions with data to make both easier to manage.</li>
                            <li class="fragment">A class defines the behaviors of a new kind of thing, while an object is a particular thing.</li>
                            <li class="fragment">Classes have constructors that describe how to create a new object of a particular kind.</li>
                            <li class="fragment">An interface describes what an object can do; an implementation defines how.</li>
                            <li class="fragment">One class can inherit from another and override just those things that it wants to change.</li>
                        </ul>
                    </section>

                    <section>
                        <h3>Object Orientation</h3>
                        <br/>

                        <ul>
                            <li class="fragment"><em>Encapsulation</em> is the property of owning data
                            </li>
                            <li class="fragment"><em>Inheritance</em> establishes a relationship hierarchy between models
                            </li>
                            <li class="fragment"><em>Polymorphism</em> allows for models to customize their own behavior even when they are based on other models
                            </li>
                        </ul>
                    </section>
                </section>

                <section>
                    <section>
                        <h3>Objects</h3>
                        <br/>

                        <p class="fragment"><strong>Everything</strong> in Python is an object.
                        </p>

                        <p class="fragment">All objects in Python have attributes and methods.
                        </p>
                    </section>

                    <section>
                        <h3>Object example: integers</h3>
                        <br>
                        <pre><code data-trim class="fragment python">
                            a = 1
                            help(a) # gives info about the object
                            dir(a) # gives list of data and behaviors associated with class
                        </code></pre>
                        <br>
                        <div style="font-size:25px">
                        <p class="fragment">What do double underscores around <code>__abs__</code> mean?</p>
                        <p class="fragment"> <code>__</code> = "dunder".
                            From <a href="https://www.python.org/dev/peps/pep-0008/">PEP8</a>: "magic objects or attributes that live in user-controlled namespaces.
                            E.g. <code>__init__</code>, <code>__import__</code> or <code>__file__</code>.
                            Never invent such names; only use them as documented."
                        </p>
                        <p class="fragment">Generally don't call dunder methods directly; instead, use built-in functions.</p>
                        </div>
                    </section>
                    <section>
                        <p class="fragment">... what about functions?</p>
                        <pre><code data-trim class="fragment python">
                            import math
                            dir(math.sin)
                        </code></pre>
                        <p class="fragment">Even functions are objects!</p>
                        <img class="fragment" src="https://media.giphy.com/media/xT0xeJpnrWC4XWblEk/giphy.gif" height="300" alt="Head explode gif">
                    </section>
                </section>

                <section>
                    <section>
                        <h3>What about classes?</h3><br>
                        <p class="fragment">
                            Classes define logical collections of attributes and methods describing a kind of object,
                            and how to create an objects of that kind.
                        </p>
                        <p class="fragment">
                            Chose classes to encapsulate internal data and functions for different types of objects.
                        </p>
                    </section>
                    <section>
                        <h3>Example: particle physics</h3>
                        <br>
                        <pre><code data-trim class="fragment python">
                            class Particle(object):
                                """A particle is a constituent unit of the universe."""
                                # class body definition here
                        </code></pre>
                        <p class="fragment">
                            What else do classes include?
                            <ul>
                                <li class="fragment"> Class variables </li>
                                <li class="fragment"> Constructors </li>
                                <li class="fragment"> Methods </li>
                            </ul>
                        </p>
                    </section>
                    <section>
                        <h3>Elementary Particles</h3>
                        <img src="./images/elementary-particles.png" height="400" alt="The Standard Model of Elementary Particles (source: Wikipedia)">
                    </section>
                    <section>
                        <h3>Class variables</h3>
                        <br>
                        <p class="fragment">Data universally applicable to all objects of the class</p>
                        <pre><code data-trim class="fragment python">
                            # contents of particle.py
                            class Particle(object):
                                """A particle is a constituent unit of the universe."""
                                # class body definition here
                                roar = "I am a particle!"
                        </code></pre>
                        <pre><code data-trim class="fragment python">
                            # import particle module
                            import particle as p
                            print(p.Particle.roar)
                        </code></pre>
                        <pre><code data-trim class="fragment python">
                            # create instance of Particle
                            import particle as p
                            higgs = p.Particle()
                            print(higgs.roar)
                        </code></pre>
                    </section>

                    <section>
                        <h3>Instance variables</h3>
                        <br>
                        <p class="fragment">Data with different values for each instance of the class</p>
                        <p class="fragment">Example: particle position.</p>
                        <pre><code data-trim class="fragment python">
                            import particle as p
                            # create empty list to hold observed particle data
                            obs = []
                            # append first particle
                            obs.append(p.Particle())
                            # assign its position
                            obs[0].r = {'x': 100.0, 'y': 38.0, 'z': -42.0}
                            # append second particle and assign its position
                            obs.append(p.Particle())
                            obs[1].r = {'x': 0.01, 'y': 99.0, 'z': 32.0}
                            # print positions of each particle
                            print(obs[0].r)
                            print(obs[1].r)
                        </code></pre>
                    </section>
                    <section>
                        <p class="fragment">Using instance variables, we can store all data associated with a particle
                            observation (position, mass, charge, spin, etc.) without much more complexity
                        </p>
                        <p class="fragment">(Hopefully the value of this reduced complexity is obvious.)
                        </p>
                        <p class="fragment">How to accomplish in class definition? Constructor: <code>__init()__</code> function.
                        </p>
                    </section>
                    <section>
                        <h3>Constructors</h3>
                        <br>
                        <p class="fragment">Constructor: <code>__init__()</code> function, executed upon instantiation of object.
                        </p>
                        <p class="fragment">Constructor <em>not</em> required; every class inherits default constructor from <code>object</code>.
                        </p>
                        <p class="fragment">Tip: good to initialize all instance variables in constructor, to ensure they are initialized when you need them.
                        </p>
                    </section>
                    <section>
                        <div style="font-size:30px">
                        <pre><code data-trim class="python">
                            # particle.py
                            class Particle(object):
                                """A particle is a constituent unit of the universe.

                                Attributes
                                ----------
                                c : charge in units of [e]
                                m : mass in units of [kg]
                                r : position in units of [meters]
                                """

                                roar = "I am a particle!"

                                def __init__(self):
                                    """Initializes the particle with default values for charge c, mass m, and position r.
                                    """
                                    self.c = 0
                                    self.m = 0
                                    self.r = {'x': 0, 'y': 0, 'z': 0}
                        </code></pre>
                        </div>
                        <p class="fragment"><code>self</code> argument required since function is method; binds to specific instance of the class.
                        </p>
                    </section>
                    <section>
                        <div style="font-size:30px">
                        <p class="fragment">More efficient: specify data values upon initialization.
                        </p>
                        <pre><code data-trim class="fragment python">
                            # particle.py
                            class Particle(object):
                                """A particle is a constituent unit of the universe.

                                Attributes
                                ----------
                                c : charge in units of [e]
                                m : mass in units of [kg]
                                r : position in units of [meters]
                                """

                                roar = "I am a particle!"

                                def __init__(self, charge, mass, position):
                                    """Initializes the particle with supplied values for charge c, mass m, and position r.
                                    """
                                    self.c = charge
                                    self.m = mass
                                    self.r = position
                        </code></pre>
                        </div>
                    </section>
                    <section>
                        <h3>Methods</h3>
                        <p class="fragment" style="font-size:30px">
                            Methods: functions tied to a class definition; may operate on data contained by object.
                        </p>
                        <div style="font-size:20px">
                        <pre><code data-trim class="fragment python">
                            # particle.py
                            class Particle(object):
                                """A particle is a constituent unit of the universe.

                                Attributes
                                ----------
                                c : charge in units of [e]
                                m : mass in units of [kg]
                                r : position in units of [meters]
                                """

                                roar = "I am a particle!"

                                def __init__(self, charge, mass, position):
                                    """Initializes the particle with supplied values for charge c, mass m, and position r.
                                    """
                                    self.c = charge
                                    self.m = mass
                                    self.r = position

                                def hear_me(self):
                                    """Print information about particle.
                                    """
                                    myroar = self.roar + (
                                        " My charge is:     " + str(self.c) +
                                        " My mass is:       " + str(self.m) +
                                        " My x position is: " + str(self.r['x']) +
                                        " My y position is: " + str(self.r['y']) +
                                        " My z position is: " + str(self.r['z']))
                                    print(myroar)
                        </code></pre>
                        </div>
                    </section>
                    <section>
                        <p class="fragment">
                            Example: proton
                        </p>
                        <div style="font-size:30px">
                        <pre><code data-trim class="fragment python">
                            from scipy import constants
                            import particle as p

                            m_p = constants.m_p
                            r_p = {'x': 1, 'y': 1, 'z': 53}
                            a_p = p.Particle(1, m_p, r_p)
                            a_p.hear_me()
                        </code></pre>
                        </div>
                    </section>
                    <section>
                        <p class="fragment">
                            Methods can alter instance variables. Example: <code>Quark</code> class
                            with instance variable <code>flavor</code>.
                        </p>
                        <div style="font-size:30px">
                        <pre><code data-trim class="fragment python">
                            def flip(self):
                                """Flip quark's flavor to complementary flavor.
                                """
                                if self.flavor == "up":
                                    self.flavor = "down"
                                elif self.flavor == "down":
                                    self.flavor = "up"
                                elif self.flavor == "top":
                                    self.flavor = "bottom"
                                elif self.flavor == "bottom":
                                    self.flavor = "top"
                                elif self.flavor == "strange":
                                    self.flavor = "charm"
                                elif self.flavor == "charm":
                                    self.flavor = "strange"
                                else:
                                    raise AttributeError("The quark cannot be flipped, because the flavor is invalid.")
                        </code></pre>
                        </div>
                    </section>
                    <section>
                        <div>
                        <pre><code data-trim class="fragment python">
                            from quark import Quark

                            t = Quark()
                            t.flavor = "top"
                            t.flip()
                            print(t.flavor)
                        </code></pre>
                        </div>
                    </section>
                    <section>
                        <p class="fragment">
                            <code>Particle</code> capture relationship between uncertainty in momentum and uncertainty in position:
                            <div class="fragment">
                            <script type="math/tex; mode=display">
                                \Delta x \Delta p_x \geq \frac{\hbar}{2}
                            </script>
                            </div>
                        </p>
                        <div style="font-size:30px">
                        <pre><code data-trim class="fragment python">
                            from scipy import constants

                            class Particle(object):
                                """A particle is a constituent unit of the universe.

                                # ... other parts of class definition ...

                                def delta_x_min(self, delta_p_x):
                                    """Returns minimum possible value of Î”x
                                    """
                                    hbar = constants.hbar
                                    delx_min = hbar / (2.0 * delta_p_x)
                                    return delx_min
                        </code></pre>
                        </div>
                    </section>

                    <section>
                        <h3>Static Methods</h3>
                        <div style="font-size:30px">
                        <p class="fragment">
                            Example: <code>Quark</code> class can include function that lists all possibel values of flavor;
                            possible values are static irrespective of specific instance.
                        </p>
                        <pre><code data-trim class="fragment python">
                            def possible_flavors():
                                return ["up", "down", "top", "bottom", "strange", "charm"]
                        </code></pre>
                        <p class="fragment">
                            Use <code>@staticmethod</code> decorator to define a method not bound to object.
                        </p>
                        <pre><code data-trim class="fragment python">
                            class Particle(object):
                                """A particle is a constituent unit of the universe.
                                """

                                # ... other parts of class definition ...

                                @staticmethod
                                def possible_flavors():
                                    return ["up", "down", "top", "bottom", "strange", "charm"]
                        </code></pre>
                        </div>
                    </section>

                    <section>
                        <h3>Duck Typing </h3>
                        <div style="font-size:30px">
                        <blockquote class="fragment">
                            &ldquo;When I see a bird that walks like a duck and swims like a duck and quacks like a duck,
                            I call that bird a duck.&rdquo;
                        </blockquote>
                        <p class="fragment">
                            Meaning: Python does not explicitly check for object types like other languages.
                            It only checks for behavior when a method is called or attribute accessed.
                        </p>
                        <p class="fragment">
                            If different object types both "quack like a duck", then it treats them like a duck.
                            An object does not need to be of a certain type in order for its methods to be invoked;
                            must merely possess those method.
                        </p>
                        </div>
                    </section>
                    <section>
                        <div style="font-size:30px">
                        <p class="fragment">
                            Example: all particles with a valid <code>c</code> attribute for charge can be used identically.
                        </p>
                        <pre><code data-trim class="fragment python">
                            def total_charge(particles):
                                """Calculate the total charge of a collection of particles.
                                """
                                tot = 0
                                for p in particles:
                                    tot += p.c
                                return tot
                        </code></pre>
                        <pre><code data-trim class="fragment python">
                            p = Proton()
                            e1 = Electron()
                            e2 = Electrion()
                            particles = [p, e1, e2]
                            total_charge(particles)
                        </code></pre>
                        <pre><code data-trim class="fragment python">
                            # overrule duck typing when inconvenient
                            def total_charge(particles):
                                """Calculate the total charge of a collection of particles.
                                """
                                tot = 0
                                for p in particles:
                                    if isinstance(p, Particle):
                                        tot += p.c
                                return tot
                        </code></pre>
                        </div>
                    </section>
                    <section>
                        <h3> Polymorphism </h3>
                        <div style="font-size:30px">
                        <p class="fragment">
                            When class inherits attributes of a parent class. General rule: what works for parent class
                            should work for subclass (plus specialized behavior).
                        </p>
                        <pre><code data-trim class="fragment python">
                            # elementary.py
                            class ElementaryParticle(Particle):
                                """No distinct constituent particles, have spin.
                                """

                                def __init__(self, spin):
                                    self.s = spin
                                    self.is_fermion = bool(spin % 1.0)
                                    self.is_boson = not self.is_fermion
                        </code></pre>
                        <pre><code data-trim class="fragment python">
                            # composite.py
                            class CompositeParticle(Particle):
                                """Particles like protons and neutrons, composed of elementary particles
                                but don't share attributes.
                                """

                                def __init__(self, parts):
                                    self.constituents = parts
                        </code></pre>
                        </div>
                    </section>
                    <section>
                        <h3> Subclasses </h3>
                        <div style="font-size:30px">
                        <p class="fragment">
                            <code>ElementaryParticle</code> and <code>CompositeParticle</code> <strong>are</strong>
                            <code>Particle</code> objects, and thus have (inherit) all of the functions and data of the original class.
                        </p>
                        <p class="fragment">
                            Can override that data and those behaviors if desired.
                        </p>
                        <pre><code data-trim class="fragment python">
                            # elementary.py
                            class ElementaryParticle(Particle):
                                """No distinct constituent particles, have spin.
                                """
                                roar = "I am an Elementary Particle!"

                                def __init__(self, spin):
                                    self.s = spin
                                    self.is_fermion = bool(spin % 1.0)
                                    self.is_boson = not self.is_fermion
                        </code></pre>
                        <pre><code data-trim class="fragment python">
                            from elementary import ElementaryParticle
                            p = ElementaryParticle(1.5)
                            p.s
                            p.hear_me()
                        </code></pre>
                        </div>
                    </section>
                    <section>
                        <h3> Superclasses </h3>
                        <div style="font-size:30px">
                        <p class="fragment">
                            Any class, including a subclass, can be a superclass or <em>parent</em> class;
                            the subclass inherits from its parent.
                        </p>
                        <p class="fragment">
                            <code>ElementaryParticle</code> can also be a superclass:
                        </p>
                        <pre><code data-trim class="fragment python">
                            class Quark(ElementaryParticle):
                                """No distinct constituent particles, have spin.
                                """

                                def __init__(self, color, charge, color_charge, spin, flavor):
                                    self.color = color
                                    self.charge = charge
                                    self.color_charge = color_charge
                                    self.spin = spin
                                    self.flavor = flavor
                        </code></pre>
                        </div>
                    </section>

                    <section>
                        <h3> Metaprogramming </h3>
                        <div style="font-size:30px">
                        <p class="fragment">
                            When definition of a class or function is specified (in part or in full)
                            by code outside the definition itself.
                        </p>
                        <p class="fragment">
                            Example: add an <code>is_particle</code> class attribute to <code>Particle</code> class:
                        </p>
                        <pre><code data-trim class="fragment python">
                            def add_is_particle(cls):
                                cls.is_particle = True
                                return cls

                            @add_is_particle
                            class Particle(object):
                                """A particle is a constituent unit of the universe.

                                # ... other parts of class definition ...
                        </code></pre>
                        </div>
                    </section>

                    <section>
                        <h3> Practical Example </h3>
                        <br>
                        <p>
                            Take a look at my code PyTeCK, which uses classes to hide lots of details of performing simulations:
                            <a href="https://github.com/kyleniemeyer/PyTeCK">https://github.com/kyleniemeyer/PyTeCK</a>
                        </p>
                </section>

                <section>
                    <h3> Assignment: merge PRs by Wednesday. </h3>
                </section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                math: {
                    mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
                    config: 'TeX-AMS_HTML-full'  // See http://docs.mathjax.org/en/latest/config-files.html
                },

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/math/math.js', async: true }
				]
			});

		</script>

	</body>
</html>
